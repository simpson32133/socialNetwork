{"version":3,"sources":["../node_modules/redux-form/es/Form.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["_babel_runtime_helpers_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_babel_runtime_helpers_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0___default","n","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_1___default","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","prop_types__WEBPACK_IMPORTED_MODULE_3__","prop_types__WEBPACK_IMPORTED_MODULE_3___default","_ReduxFormContext__WEBPACK_IMPORTED_MODULE_4__","Form","_Component","props","_this","call","this","_reduxForm","Error","_proto","prototype","componentDidMount","registerInnerOnSubmit","onSubmit","componentDidUpdate","prevProps","render","_this$props","rest","a","createElement","propTypes","func","isRequired","object","__webpack_exports__","Object","module","exports","descriptionBlock","postsBlock","posts","item","ProfileStatusWithHooks","_useState","useState","_useState2","slicedToArray","editMode","setEditMode","_useState3","status","_useState4","setStatus","useEffect","react_default","onDoubleClick","onChange","e","currentTarget","value","autoFocus","onBlur","updateStatus","ProfileInfo","_ref","profile","isOwner","savePhoto","preloader","className","s","src","photos","large","userPhoto","mainPhoto","type","target","files","length","ProfileInfo_ProfileStatusWithHooks","Post","message","likes","MyPosts","React","memo","postsElements","map","p","MyPosts_Post_Post","likesCount","createRef","AddPostFormRedux","values","addPost","newPostText","maxLenghtCreator10","maxLenghtCreator","reduxForm","form","handleSubmit","Field","name","component","Textarea","placeholder","validate","required","MyPostsContainer","connect","state","profilePage","dispatch","addPostActionCreator","Profile","Profile_ProfileInfo_ProfileInfo","MyPosts_MyPostsContainer","ProfileContainer","userId","match","params","authorizedUserId","history","push","getUserProfile","getStatus","refreshProfile","prevState","snapshot","components_Profile_Profile","assign","Component","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/3.6c91e004.chunk.js","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withReduxForm } from './ReduxFormContext';\n\nvar Form = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Form, _Component);\n\n  function Form(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    if (!props._reduxForm) {\n      throw new Error('Form must be inside a component decorated with reduxForm()');\n    }\n\n    return _this;\n  }\n\n  var _proto = Form.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props._reduxForm.registerInnerOnSubmit(this.props.onSubmit);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.onSubmit !== prevProps.onSubmit) {\n      this.props._reduxForm.registerInnerOnSubmit(this.props.onSubmit);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        _reduxForm = _this$props._reduxForm,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"_reduxForm\"]);\n\n    return /*#__PURE__*/React.createElement(\"form\", rest);\n  };\n\n  return Form;\n}(Component);\n\nForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  _reduxForm: PropTypes.object\n};\nexport default withReduxForm(Form);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3B5fC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__2l7Ca\",\"posts\":\"MyPosts_posts__1X2eX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3ZPB6\"};","import React, {useEffect, useState} from 'react';\r\n\r\n\r\n\r\nconst ProfileStatusWithHooks = (props) =>{\r\n\r\n    let [editMode, setEditMode ] = useState(false);\r\n    let [status, setStatus ] = useState( props.status);\r\n\r\n    useEffect( () => {\r\n        setStatus(props.status);\r\n    },[props.status]);\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true);\r\n    }\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(status);\r\n    }\r\n\r\n    const onStatusChange = (e) => {\r\n        setStatus( e.currentTarget.value\r\n        ) ;\r\n    }\r\n            return (\r\n                <div>\r\n                    { !editMode &&\r\n                    <div>\r\n                        <span onDoubleClick={activateEditMode}>{props.status || '-----'} </span>\r\n                    </div>\r\n                    }\r\n                    {editMode && <div>\r\n                        <input onChange={onStatusChange} autoFocus={true} onBlur={deactivateEditMode}\r\n                               value={status}\r\n                               ></input>\r\n                    </div>\r\n                    }\r\n                </div>\r\n              )\r\n        }\r\n\r\n    export default ProfileStatusWithHooks;","import React from 'react';\r\nimport s from './ProfileInfo.module.css';\r\nimport Preloader from \"../../common/preloader/preloader\";\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport userPhoto from \"../../../assets/images/user.png\";\r\n\r\nconst ProfileInfo = ({profile, status, updateStatus, isOwner, savePhoto }) => {\r\n    if(!profile) {\r\n        return <Preloader />\r\n    }\r\n    const onMainPhotoSelected = (e) => {\r\n        if (e.target.files.length) {\r\n            savePhoto(e.target.files[0]);\r\n        }\r\n    }\r\n\r\n    return <div>\r\n        <div className={s.descriptionBlock}>\r\n           <img src={profile.photos.large || userPhoto} className={s.mainPhoto} />\r\n           { isOwner && <input type={\"file\"} onChange={onMainPhotoSelected} />}\r\n           <ProfileStatusWithHooks status={status} updateStatus={updateStatus}/>\r\n        </div>\r\n\r\n    </div>\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\nimport s from './Post.module.css';\r\n\r\nconst Post = (props) => {\r\n\r\n  return (\r\n    <div className={s.item}>\r\n        {props.message}\r\n      <div><span>{props.likes}Like</span></div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Post;\r\n\r\n","import React from 'react';\r\nimport s from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {Field, Form, reduxForm} from \"redux-form\";\r\nimport {maxLenghtCreator, required} from \"../../../Utils/Validators/validators\";\r\nimport {Textarea} from \"../../common/FormsControls/FormsControls\";\r\n\r\n\r\nconst MyPosts = React.memo((props) => {\r\n    let postsElements =\r\n        props.posts.map( p => <Post message={p.message} likesCount={p.likesCount}/>);\r\n\r\n    let newPostElement = React.createRef();\r\n\r\n    let onAddPost = (values) => {\r\n        props.addPost(values.newPostText);\r\n\r\n    }\r\n\r\n    return (\r\n        <div className={s.postsBlock}>\r\n            <h3>My posts</h3>\r\n            <AddPostFormRedux onSubmit={onAddPost} />\r\n            <div className={s.posts}>\r\n                { postsElements }\r\n            </div>\r\n        </div>\r\n    )\r\n});\r\n\r\nconst maxLenghtCreator10 = maxLenghtCreator(10)\r\nconst AddMyPost = (props) => {\r\n    return(\r\n        <Form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                    <Field name='newPostText' component={Textarea}\r\n                           placeholder={'Post message'}\r\n                           validate={[required,maxLenghtCreator10]}/>\r\n            </div>\r\n            <div>\r\n                <button>Add post</button>\r\n            </div>\r\n        </Form>\r\n    )\r\n}\r\n\r\nconst  AddPostFormRedux = reduxForm({form: 'profileAddMyPost'})(AddMyPost)\r\n\r\n\r\nexport default MyPosts;","import React from 'react';\r\nimport {addPostActionCreator} from \"../../../Redax/profile-reduser\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n        newPostText: state.profilePage.newPostText\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addPost: (newPostText) => {\r\n            dispatch(addPostActionCreator(newPostText));\r\n    }\r\n    }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;","import React from 'react';\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\n\r\n\r\n\r\nconst Profile = (props) => {\r\n    return <div>\r\n        <ProfileInfo  savePhoto={props.savePhoto}\r\n                      isOwner={props.isOwner}\r\n                      profile={props.profile}\r\n                      status={props.status}\r\n                      updateStatus={props.updateStatus}/>\r\n        <MyPostsContainer />\r\n    </div>\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {getStatus, getUserProfile, savePhoto, updateStatus} from \"../../Redax/profile-reduser\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {compose} from \"redux\";\r\n\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    refreshProfile() {\r\n        let userId = this.props.match.params.userId;\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId;\r\n            if (!userId) {\r\n                this.props.history.push(\"/login\");\r\n            }\r\n        }\r\n        this.props.getUserProfile(userId);\r\n        this.props.getStatus(userId);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.refreshProfile();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Profile {...this.props}\r\n                     isOwner={!this.props.match.params.userId}\r\n                     profile={this.props.profile}\r\n                     status={this.props.status}\r\n                     updateStatus={this.props.updateStatus}\r\n                     savePhoto={this.props.savePhoto}/>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authorizedUserId: state.auth.userId,\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\n\r\nexport default compose(connect(mapStateToProps, {\r\n    getUserProfile,\r\n    getStatus,\r\n    updateStatus,savePhoto\r\n}), withRouter)(ProfileContainer)\r\n\r\n\r\n\r\n"],"sourceRoot":""}